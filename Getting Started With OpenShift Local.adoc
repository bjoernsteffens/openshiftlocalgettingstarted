= Getting Started with OpenShift Local
Bjoern Steffens | December 2022
:doctype: book
:icons: font
:toc: left

== Why OpenShift Local?
If you can run it on your laptop, it is designed for testing, trying things out and learn withouth having to have access to a larger Cloud setup. Think of it a little bit as a community edition for your own private purpose that you always have in your computer bag.


== Prerequisites for installing OpenShft Local
The hardware requirements are very low but that does not guarantee that OpenShift Local will start on your system. I have two Macbooks, one with Intel CPUs and 64 GB RAM and an M1 with only 16 GB RAM. OpenShift does not launch on my M1 most likely due to insufficient resources as I have a few other things running on it too.

The best thing you can do because the installation is so easy, is to install it and see if it starts or not and then you have your answer within minutes.

TIP: The old name of OpenShift Local is CRC (Code Ready Containers). You will see references to CRC here and there because the name of the product recently changed.

.Links:
- https://developers.redhat.com/products/openshift-local/overview[Overview]
- https://crc.dev/crc/[RedHat Getting Started Guide]
- https://access.redhat.com/documentation/en-us/red_hat_openshift_local/2.11/html/getting_started_guide/installation_gsg[Installation]
- https://access.redhat.com/documentation/en-us/red_hat_openshift_local/2.11#configuring-the-instance_gsg[Product Documentation]

In essence this is what you need to be able to launch OpenShift Local

.Hardware Resources:
* 4 physical CPU cores
* 9 GB of free memory
* 35 GB of storage space

== Locating and downloading the code
You will need a RedHat subscription in order to be able to download the code. 

Have your RedHat login ready (parter account) and go to this link and download the appropriate package for your laptop OS. Mind to also download the pull secret. You will need it during the installation.

https://access.redhat.com/documentation/en-us/red_hat_openshift_local/2.5/html/getting_started_guide/installation_gsg[Software Download]

== Installing OpenShift Local
== Configuring and starting OpenShift Local
== Completely removing OpenShift local from a Macbook

.Use the command line
[source, sh]
----
eval $(crc oc-env)
crc stop
crc delete
crc cleanup # This does part of the left-over-cleanup on disk
rm -rf ~/.crc
----

Quit the application on the desktop
Delete the App by dragging and dropping to bin or using CleanMyMac

Look for any leftover here to really make sure you get everything off of the machine

.File List:
- ~/Library/
- ~/Library/Caches/
- ~/Library/Preferences/
- ~/Library/Application Support/
- ~/Library/Application Support/CrashReporter/
- ~/Library/Saved Application State/

.Shell Command to run
[source,sh]
----
# Find the left over first
ls -altr ~/Library | grep -i red
rm -rf {whatever you find with "redhat"}

# Reboot the machine
# Reinstall OpenShift local if needed 
----

== Connecting to image repos
== Downloading images from repos
== Deploying containers from images and source code
== Appendix - AsciiDoctor
=== What is asciidoc
AsciiDoc can a little bit more than Markdown and lends itself a bit better to technical documenation and collaboration across tools like Github. The syntax is a bit more comprehensive vs Markdown but pays off very swiftly when your documentation gets a little bit more complex and intertwined.

AsciiDoc is opensource but around since many years and is getting more and more traction. There are standardisation and communities working the tool contigiously hence it is something worth while to look into.

=== How do you edit and preview asciidoc files?
There are plugins to a few IDEs and the most prominent one is Visual Studio Code, where you can edit and live-preview the content.

.Links
- https://asciidoc.org/ [AsciiDoc]
- https://asciidoctor.org/[Asciidoctor]
- https://docs.asciidoctor.org/asciidoctor/latest/[Documentation]
- https://kate-editor.org/syntax/data/html/asciidoc.adoc.html[Comprehensive Cheat-Sheet and Sample file]

=== What is the asciidoc toolchain?
Editing an adoc file in Visual Studio Code, you need to transform the file into something consumable. 

TIP: The adoc file is rendered by Github so you can point to it and share the link and your it can be consumed withouth having to first install an IDE. Just like the file you are reading right now.

.The most popular formats are:
- pdf
- html
- epub

You will need to install the command line toolchain and use a very few and easy command to transform the adoc file into one or more of the mentioned formats above.

.Installation instructions
- https://docs.asciidoctor.org/asciidoctor/latest/install/macos/[Getting the toolchain installed]


.Installing the pdf and epub converters
[source,terminal]
----
sudo gem install asciidoctor-pdf
brew install asciidoctor-epub3
----

.Shell Commands to convert the file
[source,terminal]
----
# Change to the folder where your adoc file file

> asciidoctor-epub3 "Getting\ Started\ With\ OpenShift\ Local.adoc"
> asciidoctor-pdf "Getting\ Started\ With\ OpenShift\ Local.adoc"  
> asciidoctor "Getting\ Started\ With\ OpenShift\ Local.adoc"  
----

image::./images/asciidoc_convert_output_samples.jpg[Sample output]
image::./images/asciidoc_convert_output_samples_epub.jpg[Sample epub on a mobile device]
